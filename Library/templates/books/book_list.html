{% extends 'base.html' %}
{% block content %}
<h2>Books</h2>

<form method="get" class="mb-3 d-flex">
  <input type="text" name="q" placeholder="Search by title or author" value="{{ query }}" class="form-control me-2">
  <button type="submit" class="btn btn-outline-primary">Search</button>
</form>

<a href="{% url 'book_create' %}" class="btn btn-success mb-2">Add Book</a>
<a href="{% url 'import_books' %}" class="btn btn-primary mb-2">Import Books from API</a>

<table class="table table-bordered">
  <thead><tr><th>ID</th><th>Title</th><th>Author</th><th>Stock</th><th>Actions</th></tr></thead>
  <tbody>
    {% for book in books %}
      <tr>
        <td>{{ book.book_id}}</td>
        <td>{{ book.title }}</td>
        <td>{{ book.author }}</td>
        <td>{{ book.stock }}</td>
        <td>
          <a href="{% url 'book_update' book.id %}" class="btn btn-sm btn-info">Edit</a>
          <a href="{% url 'book_delete' book.id %}" class="btn btn-sm btn-danger">Delete</a>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="5">No books found.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
